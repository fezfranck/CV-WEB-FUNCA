<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Art√≠culos - Francisco Esparza</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&family=Roboto:wght@300;400&display=swap" rel="stylesheet">
    <style>
        /* MANT√âN TODOS TUS ESTILOS ACTUALES */
        /* Solo a√±ade estos estilos adicionales */
        
        .cargando {
            text-align: center;
            padding: 40px;
            font-size: 1.2em;
            color: #7f8c8d;
        }
        
        .error-carga {
            text-align: center;
            padding: 40px;
            color: #e74c3c;
        }
        
        .articulo-vacio {
            text-align: center;
            padding: 40px;
            color: #7f8c8d;
            font-style: italic;
        }
    </style>
</head>
<body>

    <!-- Men√∫ de navegaci√≥n vertical -->
    <nav class="vertical-menu">
        <ul>
            <li><a href="/">Inicio</a></li>
            <li><a href="/templates/educacion.html">Educaci√≥n</a></li>
            <li><a href="/templates/experiencias.html">Experiencias</a></li>
            <li><a href="/templates/quiensoy.html">Qui√©n Soy</a></li>
            <li><a href="/templates/contacto.html">Contacto</a></li>
            <li><a href="/templates/articulos.html">Art√≠culos</a></li>
        </ul>
    </nav>

    <!-- Contenido principal -->
    <div class="main-content">
        <header>
            <h1 class="page-title">Art√≠culos</h1>
            <p class="page-subtitle">Opini√≥n - Actualidad</p>
        </header>
        
        <div class="articulos-container" id="lista-articulos">
            <div class="cargando">
                <p>Cargando art√≠culos...</p>
            </div>
        </div>
    </div>

    <script>
        // Funci√≥n para cargar art√≠culos autom√°ticamente
        async function cargarArticulos() {
    try {
        const container = document.getElementById('lista-articulos');
        
        console.log('üîç Iniciando carga de art√≠culos...');
        
        // 1. Cargar la lista de art√≠culos
        const jsonUrl = '/static/data/articulos.json';
        console.log('üìÇ Cargando JSON desde:', jsonUrl);
        
        const response = await fetch(jsonUrl);
        if (!response.ok) {
            throw new Error(`Error HTTP: ${response.status} - ${response.statusText}`);
        }
        
        const articulos = await response.json();
        console.log('‚úÖ JSON cargado correctamente:', articulos);
        
        // 2. Si no hay art√≠culos, mostrar mensaje
        if (articulos.length === 0) {
            container.innerHTML = `
                <div class="articulo-vacio">
                    <h2>No hay art√≠culos publicados</h2>
                    <p>Pr√≥ximamente se publicar√°n nuevos art√≠culos.</p>
                </div>
            `;
            return;
        }
        
        // 3. Ordenar art√≠culos por fecha (m√°s reciente primero)
        articulos.sort((a, b) => {
            const fechaA = new Date(a.fecha.split('/').reverse().join('-'));
            const fechaB = new Date(b.fecha.split('/').reverse().join('-'));
            return fechaB - fechaA;
        });
        
        // 4. Limpiar contenedor
        container.innerHTML = '';
        
        // 5. Cargar cada art√≠culo
        for (const articulo of articulos) {
            try {
                console.log(`üìñ Intentando cargar art√≠culo: ${articulo.titulo}`);
                console.log(`üìÅ Archivo: ${articulo.archivo}`);
                
                // Cargar contenido del art√≠culo
                const contenidoResponse = await fetch(articulo.archivo);
                if (!contenidoResponse.ok) {
                    throw new Error(`Error ${contenidoResponse.status}: No se pudo cargar el archivo`);
                }
                
                const contenido = await contenidoResponse.text();
                console.log(`‚úÖ Contenido cargado para: ${articulo.titulo}`);
                
                // Crear elemento del art√≠culo
                const articuloElement = document.createElement('div');
                articuloElement.className = 'articulo';
                articuloElement.innerHTML = `
                    <h2 class="articulo-titulo">${articulo.titulo}</h2>
                    <p class="articulo-fecha">Publicado el: ${articulo.fecha}</p>
                    <div class="articulo-contenido">
                        ${contenido}
                    </div>
                    <div class="compartir-redes">
                        <a href="#" class="btn-compartir btn-facebook" data-titulo="${articulo.titulo}">Compartir en Facebook</a>
                        <a href="#" class="btn-compartir btn-twitter" data-titulo="${articulo.titulo}">Compartir en Twitter</a>
                        <a href="#" class="btn-compartir btn-linkedin" data-titulo="${articulo.titulo}">Compartir en LinkedIn</a>
                        <a href="#" class="btn-compartir btn-whatsapp" data-titulo="${articulo.titulo}">Compartir en WhatsApp</a>
                    </div>
                `;
                
                container.appendChild(articuloElement);
                
            } catch (error) {
                console.error(`‚ùå Error cargando art√≠culo ${articulo.titulo}:`, error);
                
                // Mostrar art√≠culo con mensaje de error detallado
                const articuloError = document.createElement('div');
                articuloError.className = 'articulo';
                articuloError.innerHTML = `
                    <h2 class="articulo-titulo">${articulo.titulo}</h2>
                    <p class="articulo-fecha">Publicado el: ${articulo.fecha}</p>
                    <div class="articulo-contenido">
                        <p style="color: #e74c3c; font-weight: bold;">Error cargando el art√≠culo</p>
                        <p><strong>Archivo:</strong> ${articulo.archivo}</p>
                        <p><strong>Error:</strong> ${error.message}</p>
                        <p>Verifica que el archivo exista en la ruta correcta.</p>
                    </div>
                `;
                container.appendChild(articuloError);
            }
        }
        
        console.log('üéâ Todos los art√≠culos procesados');
        
        // 6. Configurar botones de compartir
        configurarBotonesCompartir();
        
    } catch (error) {
        console.error('üí• Error general cargando art√≠culos:', error);
        document.getElementById('lista-articulos').innerHTML = `
            <div class="error-carga">
                <h2>Error al cargar los art√≠culos</h2>
                <p><strong>Error:</strong> ${error.message}</p>
                <p>Verifica la consola del navegador (F12) para m√°s detalles.</p>
            </div>
        `;
    }
}
